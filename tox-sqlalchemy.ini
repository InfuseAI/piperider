[tox]
env_list =
    py{38,39,310,311}-sqlalchemy-{14,20}
minversion = 4.7.0

[testenv]
description = run the tests with pytest
package = wheel
wheel_build_env = .pkg

basepython =
    py38: python3.8
    py39: python3.9
    py310: python3.10
    py311: python3.11

deps =
    pytest>=6
    dbt-core>=1.6,<1.7
    dbt-duckdb>=1.6,<1.7
    sqlalchemy-14: sqlalchemy>=1.4,<2.0
    sqlalchemy-20: sqlalchemy>=2.0


commands =
    pytest {tty:--color=yes} {posargs}

setenv =
    PYTHONPATH = {toxinidir}/tests/:{env:PYTHONPATH}


